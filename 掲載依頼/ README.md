# Kintone カスタマイズ JS 一覧（出荷管理・案件管理連携）

このディレクトリには、Kintone の「出荷管理くまポン」や関連アプリ（案件管理、商品マスタ、発注書、請求書など）の業務を自動化・効率化するための JavaScript ファイルが含まれます。

## ファイル構成と役割

### 1. `02_1_CreatePurchaseOrderRecode_241119.js`

- **役割:** 発注書・請求書・見積書の自動生成
- **機能:**
  - プロセス管理でのステータス変更に応じて、発注書／請求書／見積書アプリにレコードを作成。
  - 発注番号・請求番号の採番、納品先 ID の取得、自動リンク設定。
  - 関連レコード ID や URL を掲載依頼アプリに反映。
- **動作タイミング:** プロセス管理「発注書・請求書・見積書レコードの発行済み」時。

---

### 2. `02_1_CreateRecodes_250423.js`

- **役割:** 商品マスタ・案件管理・掲載セット数管理のレコード作成
- **機能:**
  - 商品マスタ未登録商品の自動登録。
  - 案件管理へのレコード生成（モール別の管理番号採番含む）。
  - 掲載セット数管理へのレコード生成。
  - 必要に応じて商品マスタの在庫・案件情報を更新。
- **動作タイミング:** プロセス管理「商品レコード発行済み」「案件レコード発行済み」時。

---

### 3. `02_2_SetStyle_20250423.js`

- **役割:** UI 制御（掲載残日数フィールドの編集制御）
- **機能:** 新規作成・編集画面で「掲載残日数」系フィールドを常に非活性化。

---

### 4. `02_2_SetStyle_ItemLookUp.js`

- **役割:** 商品ルックアップ関連の UI 制御
- **機能:**
  - 商品ルックアップ有無に応じた入力欄の表示/非表示切り替え。
  - ルックアップ取得項目の活性・非活性制御。
  - 新規・編集・詳細画面で動作。

---

### 5. `02_3_SetValue_FastestBestDate.js`

- **役割:** 最短賞味期限の自動設定
- **機能:** 複数商品の賞味期限から最短日付を算出し「最短賞味期限」フィールドに自動反映。

---

### 6. `02_3_SetValue_OrderStatus.js`

- **役割:** 発注・受発注ステータスの自動設定
- **機能:** 受発注日と納品日が両方入力されたらステータスを「受発注」に設定。

---

### 7. `02_3_SetValue_PostingDays.js`

- **役割:** 掲載残日数の自動計算
- **機能:** 掲載終了日または掲載終了日\_その他から残日数を算出して反映。

---

### 8. `03_3_SetValue_Tag.js`

- **役割:** タグフィールドの自動設定
- **機能:** タグ選択フィールドの値をカンマ区切りに変換し、タグフィールドに反映。

---

### 9. `案件アプリの情報更新_20250425.js`

- **役割:** 案件管理アプリへの情報同期
- **機能:** レコード保存時に、同一レコード ID で案件管理アプリの特定フィールドを更新。

---

## 読み込み順序の推奨

1. **UI 制御・表示系**

   - `02_2_SetStyle_20250423.js`
   - `02_2_SetStyle_ItemLookUp.js`

2. **自動計算・値設定系**

   - `02_3_SetValue_FastestBestDate.js`
   - `02_3_SetValue_OrderStatus.js`
   - `02_3_SetValue_PostingDays.js`
   - `03_3_SetValue_Tag.js`

3. **レコード生成・更新系**
   - `02_1_CreateRecodes_250423.js`
   - `02_1_CreatePurchaseOrderRecode_241119.js`
   - `案件アプリの情報更新_20250425.js`
